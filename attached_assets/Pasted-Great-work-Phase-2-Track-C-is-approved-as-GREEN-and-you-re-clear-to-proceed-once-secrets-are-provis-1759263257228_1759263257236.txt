Great work. Phase 2 Track C is approved as GREEN and you’re clear to proceed once secrets are provisioned.

Decisions and directives

Secrets provisioning – do this now
VITE_GA_MEASUREMENT_ID
Create/confirm GA4 property “ScholarshipAI Web” → Web data stream → copy Measurement ID (format G-XXXXXXX).
Configure GA to respect Consent Mode v2 and disable IP retention; no PII or student identifiers are to be sent.
AGENT_BRIDGE_SHARED_SECRET (preferred over SHARED_SECRET; support both but standardize on AGENT_BRIDGE_SHARED_SECRET)
Generate a 32+ byte random value (example: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))").
Rotation policy: rotate every 90 days or on any suspected exposure.
Security guardrail: /api/dev/diagnostics must be dev-only or gated via Authorization header using the shared secret. Do not expose secret values—only booleans.
Success criteria after provisioning

/api/dev/diagnostics shows all secrets = true.
GA beacon loads asynchronously without blocking rendering.
No diagnostics or console errors in production mode.
2. FCP optimization (current 4.7s → target <1.8s)
Immediate wins (execute within 48–72 hours):

LCP/FCP targets
Mark LCP element; set fetchpriority="high" on the LCP image; add width/height; use responsive srcset and modern formats (WebP/AVIF).
Compress hero/media assets to <100KB gzip where feasible.
Render-blocking reductions
Inline only critical CSS (use a tool like Critters/LightningCSS), defer the rest; ensure no render-blocking CSS from third parties.
Defer all non-critical JS; postpone third-party scripts (GA stays async/defer; fire after page load).
Fonts
Preload WOFF2 with rel=preload as=font, crossOrigin; use font-display: swap.
Bundles
Route-level code-splitting with React.lazy for non-critical components; remove unused deps; aim for <150KB gzip per-route JS initially.
Measurement
Run Lighthouse Mobile with throttling in production build to validate. Report p75 FCP and LCP from your web-vitals logger before/after.
Next-level improvements (plan if still >2.2s after quick wins):

Consider React 18 streaming SSR or pre-rendering for high-traffic pages.
Introduce priority hints for critical CSS/JS and preconnect to asset/CDN domains.
Audit main-thread blocking time; budget TBT <150ms.
3. Lighthouse CI and budgets

Proceed with LHCI after secrets + first FCP pass.
Gating targets (mobile): Performance ≥90, LCP <2.5s, FCP <1.8s, CLS <0.1, INP p75 <200ms, TBT <200ms.
Make LHCI a required check in CI for main branch.
4. Playwright smoke tests

Install and run Chromium: npx playwright install chromium, then npx playwright test.
Add to CI with artifacts on failure (trace/video). Stub or mock analytics calls to avoid flakiness.
5. Auto Page Maker and SEO scale-up

After FCP improvement and sitemap exposure, expand from 40 pages toward 200 in controlled batches (e.g., +40/day).
Guardrails: unique, high-signal content per page; canonical URLs; zero duplicates; maintain internal linking density; add breadcrumbs schema.
Ensure /sitemap.xml is live and robots.txt references it; submit to Google Search Console.
6. Compliance and privacy

GA4: enable Consent Mode v2; anonymize IP; no collection of PII or education records. Document data flows for FERPA/COPPA review.
Diagnostics routes: locked behind env flag and/or shared-secret header.
Execution plan and owners

Today
Ops: Add VITE_GA_MEASUREMENT_ID and AGENT_BRIDGE_SHARED_SECRET. Confirm via /api/dev/diagnostics.
Engineering: Lock /api/dev/diagnostics as dev-only or shared-secret gated.
Within 72 hours
Web Perf Lead: Implement quick-win FCP fixes; provide before/after LH runs and real-user web-vitals p75 for FCP/LCP/CLS/INP/TTFB.
QA: Run LHCI baseline and Playwright suite in CI; report pass rates and any regressions.
After first pass hits FCP ≤2.2s
SEO: Expose sitemap and robots.txt; submit sitemap to GSC; begin Auto Page Maker expansion in batches.
Engineering: Plan SSR/pre-rendering if FCP not yet <1.8s.
KPIs to report in next update

Web-vitals p75 (mobile): FCP, LCP, INP, CLS, TTFB by top 5 pages.
Lighthouse CI score trend and budget compliance.
Playwright pass rate and mean test duration.
SEO: number of indexed pages, impressions, CTR (once GA/GSC data accrues).
Go/No-Go

Go to Phase 3 immediately after secrets confirm true and first FCP improvement pass is merged. If FCP remains >2.2s after quick wins, pause scale-up of Auto Page Maker beyond 40 pages and execute the next-level perf plan.
You’re clear to add the two secrets now. Notify me once diagnostics are green; I’ll authorize Phase 3 and the SEO scale-up after we see the first FCP improvement run.